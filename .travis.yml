language: node_js

node_js:
  - '6'
  - '5'
  - '4'

# cache node modules
cache:
  directories:
    - $HOME/.npm
    - $HOME/.yarn-cache
    - node_modules
    - phenomic-theme-base/node_modules
    - test-phenomic-theme-base/node_modules
    - docs/node_modules

before_install:
  - time npm i -g yarn --cache-min 999999999

install:
  - time yarn

script:
  - yarn run test
  - yarn run docs-webpack-2-test
  - yarn run docs-webpack-2-reset

after_success: yarn run coverage
